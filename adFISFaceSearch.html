 <!DOCTYPE html>
<html>
	<head>
		<title>Face Search</title>
		<meta charset="utf-8">
		<style type="text/css">
		    .step_box {
		        border: 1.0px solid rgb(204, 204, 204);
		        border-radius: 10.0px 10.0px 10.0px 10.0px;
		    }
		    .step_box:hover, #selected_step_box, .QuickStartLong:hover {
		        background: rgb(184, 225, 252);
		    }
		    .selected {
		        background-color : #fff000;
		    }
	    </style>
	</head>
	<body>
		<!-- <script src="js/myInclude.js"></script> -->
		<script type="text/javascript" src="js/environment.js"></script>
		<script type="text/javascript" src="js/utils.js"></script>
		<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
		<script type="text/javascript" src="js/jquery.video-ui.js"></script>		
		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css">
		<!-- Optional theme -->
		<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap-theme.min.css">
		<!-- Latest compiled and minified JavaScript -->
		<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="css/FISLayout.css"/>
		<script src="http://code.jquery.com/jquery-1.7.2.js"></script>
	    <script type="text/javascript">
	    $( document ).ready( function(){
	        $('.step_wrapper').on('click','.step_box',function () {
	             $('.step_box').removeClass('selected');
	             $(this).addClass('selected');
	        });
	    });
		 </script>
		<script type="text/javascript">
			$(document).ready(function(){
				//in minutes
				var dataCenterURL = VICA.ConfigHandler.getValue('static') + "/vica_web/adFISFaceSearch.php";
				// and remember the jqXHR object for this request
				var jqxhr = $.ajax( dataCenterURL )
				  .done(function(data) {
				    // alert( "success" );
				    var data = $.parseJSON(data);
				    console.log("Extracted Face Counting data:",data);
				    $.each(data, function(i,item){
	                	$('#FSsidebar').append('<div class="step_box" thumb>'
	                		+'<div class="thumbnail" href="#">'
	                			+'<img class="img-responsive" src='+item['face_path']+' width="100" height="80">'
	                			+'<div class="caption">'
	                			+'<p>'+item['sim_count']+'</p>'
								+'<p><button onclick=Search('+JSON.stringify(item['data'])+')>Search</button></p>'
                				+'</div>'
                			+'</div>'
            			+'</div>');
	        		});
				  })
				  .fail(function() {
				    //alert( "error" );
				  })
				  .always(function() {
				    //alert( "complete" );
				  });
			});
		</script>
			
			
		<div id="FScontainer">
		  <div id="FSheader">
		  	<ol class="breadcrumb">
			  <li><a href="FISIndex.html">Main Page</a></li>
			  <li class="active">Face Search</li>
			  <h2>Face Search</h2>
			</ol>
		  </div>
		  <div id="FSmenu" style="overflow-x: scroll;">
		  </div>
		  <div id="FSmainContent">
		    <div id="FSsidebar" style="overflow-y: scroll;">
	    	</div>
		    <div id="FScontent" style="overflow: scroll;">
		    </div>
		   </div>
		</div>
		
	<script type="text/javascript">
		
		function Search(data)
		{
			var count = data.length;
			$('#FSmenu').empty();
			for(var i=0;i<count;++i)
			{
				$('#FSmenu').append('<div class="FSdiv-inline" thumb>'
            		+'<div class="thumbnail" href="#">'
            			+'<img class="img-responsive" src='+data[i]['face_path']+' width="100" height="80">'
						+'<p>'+data[i]['sim_value']+'</p>'
						+'<p>'+data[i]['sim_count']+'</p>'
						+'<p><button onclick=LoadSimImg('+JSON.stringify(data[i]['img_dir'])+','+JSON.stringify(data[i]['sub_img_path'])+')>Load</button></p>'
        			+'</div>'
    			+'</div>');
			}
		}
		function LoadSimImg(val,val1)
		{
			// alert(data);
			var my_data = val;
			var my_data1 = val1;
			$(function(){
				$.ajax({
					url: "adFISFaceSearchLoadSimImg.php",
					type: "POST",
					data: {trans_data:my_data,trans_data1:my_data1},
				error: function(){  
	            alert('Error loading XML document');  
		        },  
		        success: function(data,status){//如果调用php成功    
				$('#FScontent').empty();
				var data = $.parseJSON(data);
			    console.log("Extracted Face Counting data:",data);
			    $.each(data, function(i,item){
			    	$('#FScontent').append('<div class="FSdiv-inline" thumb>'
		            		+'<div class="thumbnail" style="width:200px" href="#">'
		            			+'<img class="img-responsive" src='+data[i]['face_path']+' width="100" height="80">'
		        			+'</div>'
		    			+'</div>');
			    });
		        }
				});
			});
		}
		
			</script>
	</body>
</html>