<!DOCTYPE html>
<html>
	<head>
		<title>Digital Media Management</title>
		<script src="js/Chart.js"></script>
		
		<meta charset="utf-8">
		<script type="text/javascript">
		function checkLogin()
		{
			$(function(){
				$.ajax({
					url: "my.php",
					type: "POST",
				error: function(){  
	            alert('Error loading XML document');  
		        },  
		        success: function(data,status){//如果调用php成功    
		        var data = $.parseJSON(data);
				if(data['state']=="true")
				{
				}else
				{
					self.location='login.html';
				}
		        }
				});
			});
		}
		window.onload=checkLogin;
	</script>
	</head>

	<body>
		<!-- <script src="js/myInclude.js"></script> -->
		<script type="text/javascript" src="js/environment.js"></script>
		<script type="text/javascript" src="js/utils.js"></script>
		<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
		<script type="text/javascript" src="js/jquery.video-ui.js"></script>		
		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css">
		<!-- Optional theme -->
		<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap-theme.min.css">
		<!-- Latest compiled and minified JavaScript -->
		<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="css/layout.css"/>
		
		<ol class="breadcrumb">
		  <li><a href="DMIndex.html">Main Page</a></li>
		  <li class="active">Appearance Frequency and Times</li>
		</ol>
		
		<div class="panel panel-primary">
		  <div class="panel-heading">Appearance Frequency and Times</div>
		  <div class="panel-body">
		   <div id="warp" class="media">
		    	<div id="left_a">
		    		<a class="pull-left" href="#">
				    <div class="videoUiWrapper thumbnail" style="position:fixed; left:0; width:320;">
				    	<button type="button" class="btn btn-default btn-lg" onclick="playPause()">
						  		<span id="play/pause" class="glyphicon glyphicon-play"></span>Play/Pause
					  	  	</button>
						  	<button type="button" class="btn btn-default btn-lg" onclick="stop()">
						  		<span id="stop" class="glyphicon glyphicon-stop"></span>Stop
						  	</button>
						  	<br /> 
					  <video width="300" height="214" id="demo1" controls>
					  	
					    <source src="data/xjp.ogg" type="video/ogg">
					    Your browser does not support the video tag.
					  </video>
					</div>
				  </a>
    			</div>
			  
			  <div id="right_a" class="media-body">
		  
		  <table>
		  	<thead>
		  		<th><p>Appearance Frequency</p></th>
		  		
		  	</thead>
		  	<tbody>
		  		<tr>
		  			<th>
		  			<img src="data\ExtractedFaces\CNTVXjpDemo\Person4.jpg" width="60" height="60">
		  			</th>
		  			<th>
		  				<div ondblclick="playFClip('1562_1641_1760_2080_3517_3610_3997_4085')" style="width:200px;height:20px;border:1px solid #000;background:blue;float:left"></div><span>  </span>4
		  			</th>
		  		</tr>
		  		<tr>
		  			<th>
		  				<div style="width:200px;height:20px;"></div>
		  			</th>
		  			<th>
		  				
		  			</th>
		  		</tr>
		  		<tr>
		  			<th>
		  			<img src="data\ExtractedFaces\CNTVXjpDemo\Person0.jpg" width="60" height="60">
		  			</th>
		  			<th>
		  				<div ondblclick="playFClip('3_80_256_299_302_395')" style="width:150px;height:20px;border:1px solid #000;background:blue;float:left"></div><span>  </span>3
		  			</th>
		  		</tr>
		  		<tr>
		  			<th>
		  				<div style="width:200px;height:20px;"></div>
		  			</th>
		  			<th>
		  				
		  			</th>
		  		</tr>
		  		<tr>
		  			<th>
		  			<img src="data\ExtractedFaces\CNTVXjpDemo\Person3.jpg" width="60" height="60">
		  			</th>
		  			<th>
		  				<div ondblclick="playFClip('1415_1435')" style="width:50px;height:20px;border:1px solid #000;background:blue;float:left"></div><span>  </span>1
		  			</th>
		  		</tr>
		  		<tr>
		  			<th>
		  				<div style="width:200px;height:20px;"></div>
		  			</th>
		  			<th>
		  				
		  			</th>
		  		</tr>
		  		<tr>
		  			<th>
		  			<img src="data\ExtractedFaces\CNTVXjpDemo\Person7.jpg" width="60" height="60">
		  			</th>
		  			<th>
		  				<div ondblclick="playFClip('3691_3743')" style="width:50px;height:20px;border:1px solid #000;background:blue;float:left"></div><span>  </span>1
		  			</th>
		  		</tr>
		  		<tr>
		  			<th>
		  				<div style="width:200px;height:20px;"></div>
		  			</th>
		  			<th>
		  				
		  			</th>
		  		</tr>
		  		<tr>
		  			<th>
		  			<img src="data\ExtractedFaces\CNTVXjpDemo\Person8.jpg" width="60" height="60">
		  			</th>
		  			<th>
		  				<div ondblclick="playFClip('3746_3792')" style="width:50px;height:20px;border:1px solid #000;background:blue;float:left"></div><span>  </span>1
		  			</th>
		  		</tr>
		  		<tr>
		  			<th>
		  				<div style="width:200px;height:20px;"></div>
		  			</th>
		  			<th>
		  				
		  			</th>
		  		</tr>
		  		<tr>
		  			<th>
		  			<img src="data\ExtractedFaces\CNTVXjpDemo\Person9.jpg" width="60" height="60">
		  			</th>
		  			<th>
		  				<div ondblclick="playFClip('3851_3914')" style="width:50px;height:20px;border:1px solid #000;background:blue;float:left"></div><span>  </span>1
		  			</th>
		  		</tr>
		  		<tr>
		  			<th>
		  				<div style="width:200px;height:20px;"></div>
		  			</th>
		  			<th>
		  				
		  			</th>
		  		</tr>
		  	</tbody>
		  </table>
		  
		 <p></p>
		  
		  
		  <table>
		  	<thead>
		  		<th><p>Appearance Times</p></th>
		  		
		  		<th>
		  				<span>          </span>
	  			</th>
	  			<th>
		  			<img src="data/AppearanceDuration/axis.jpg"/>
		  		</th>
		  	</thead>
		  	<tbody>
		  		<tr>
		  			<th>
		  				<img src="data\ExtractedFaces\CNTVXjpDemo\Person4.jpg" width="60" height="60">
		  			</th>
		  			<th>
		  				<span>          </span>
		  			</th>
		  			<th>
						<img src="data/AppearanceDuration/0004.jpg" border="0" usemap="#0004" alt="0004" />
						<map name="0004" id="0004">
						  <area shape="rect" coords="260,1,273,20" ondblclick="playClip(1562,1641)"/>
						  <area shape="rect" coords="293,1,346,20" ondblclick="playClip(1760,2080)"/>
						  <area shape="rect" coords="586,1,601,20" ondblclick="playClip(3517,3610)" />
						  <area shape="rect" coords="666,1,680,20" ondblclick="playClip(3997,4085)" />
						</map>
		  			</th>
		  		</tr>
		  		
		  		<tr>
		  			<th>
		  				<img src="data\ExtractedFaces\CNTVXjpDemo\Person0.jpg" width="60" height="60">
		  			</th>
		  			<th>
		  				<span>          </span>
		  			</th>
		  			<th>
						<img src="data/AppearanceDuration/0000.jpg" border="0" usemap="#0000" alt="0000" />
						<map name="0000" id="0000">
						  <area shape="rect" coords="1,1,15,20" ondblclick="playClip(3,80)"/>
						  <area shape="rect" coords="42,1,49,20" ondblclick="playClip(256,299)"/>
						  <area shape="rect" coords="50,1,65,20" ondblclick="playClip(302,395)" />
						</map>
		  			</th>
		  		</tr>
		  		<tr>
		  			<th>
		  				<img src="data\ExtractedFaces\CNTVXjpDemo\Person3.jpg" width="60" height="60">
		  			</th>
		  			<th>
		  				<span>          </span>
		  			</th>
		  			<th>
						<img src="data/AppearanceDuration/0003.jpg" border="0" usemap="#0003" alt="0003" />
						<map name="0003" id="0003">
						  <area shape="rect" coords="235,1,239,20" ondblclick="playClip(1415,1435)"/>
						</map>
		  			</th>
		  		</tr>
		  		<tr>
		  			<th>
		  				<img src="data\ExtractedFaces\CNTVXjpDemo\Person7.jpg" width="60" height="60">
		  			</th>
		  			<th>
		  				<span>          </span>
		  			</th>
		  			<th>
						<img src="data/AppearanceDuration/0007.jpg" border="0" usemap="#0007" alt="0007" />
						<map name="0007" id="0007">
						  <area shape="rect" coords="615,1,623,20" ondblclick="playClip(3691,3743)"/>
						</map>
		  			</th>
		  		</tr>
		  		<tr>
		  			<th>
		  				<img src="data\ExtractedFaces\CNTVXjpDemo\Person8.jpg" width="60" height="60">
		  			</th>
		  			<th>
		  				<span>          </span>
		  			</th>
		  			<th>
						<img src="data/AppearanceDuration/0008.jpg" border="0" usemap="#0008" alt="0008" />
						<map name="0008" id="0008">
						  <area shape="rect" coords="624,1,632,20" ondblclick="playClip(3746,3792)"/>
						</map>
		  			</th>
		  		</tr>
		  		<tr>
		  			<th>
		  				<img src="data\ExtractedFaces\CNTVXjpDemo\Person9.jpg" width="60" height="60">
		  			</th>
		  			<th>
		  				<span>          </span>
		  			</th>
		  			<th>
						<img src="data/AppearanceDuration/0009.jpg" border="0" usemap="#0009" alt="0009" />
						<map name="0009" id="0009">
						  <area shape="rect" coords="641,1,652,20" ondblclick="playClip(3851,3914)"/>
						</map>
		  			</th>
		  		</tr>
		  		
		  	</tbody>
		  </table>
		  
		  
		  
		  </div>
			<div class="clear">
		 	
		 	</div>   	
			</div>
		  </div>
		  <div class="panel-footer">CNTV video</div>
		</div>
		

	</body>
	
	<script>
	var myVideo=document.getElementById("demo1");
	var mySpan=document.getElementById("play/pause");
		function playFClip(s_e_f)
		{
			var start_end_frame = s_e_f;
			var vals = start_end_frame.split("_");
	  	 	var len = vals.length;
	  	 	var fps=20;
	  	 	var start_time=Math.floor(vals[0]/fps);
	  	 	var end_time=Math.floor(vals[1]/fps);
	  	 	var interval=(end_time-start_time+1)*1000;
		  	playClip(vals[0],vals[1]);
	 	 	var idx=2;
			  function run()
			  {
			  	playClip(vals[idx],vals[idx+1]);
			  	start_time=Math.floor(vals[idx]/fps);
				end_time=Math.floor(vals[idx+1]/fps);
				interval=(end_time-start_time+1)*1000;
			  	idx+=2;
			  	if(idx<len)
			  	{
			  		setTimeout(run,interval);
			  	}
			  	
			  }
			  setTimeout(run,interval);
		}
		
		
		function playClip(s_f,e_f)
	  	 {
	  	 	var fps=20;
	  	 	var start_time=Math.floor(s_f/fps);
	  	 	var end_time=Math.floor(e_f/fps);
	  	 	var interval=(end_time-start_time+1)*1000;
	  	 	
			if(myVideo.paused)
			{
				stop();
				myVideo.currentTime+=start_time;
				myVideo.play();
				sysButton();
				setTimeout("myVideo.pause()",interval);
				
			}else
			{
				stop();
				myVideo.pause();
				myVideo.currentTime+=start_time;
				myVideo.play();
				sysButton();
				setTimeout("myVideo.pause()",interval);
				
			}
	  	 }
	  	 
	  	 function playPause(){
			if(myVideo.paused){
				myVideo.play();
				mySpan.className="glyphicon glyphicon-pause";
			}
			else{
				myVideo.pause();
				mySpan.className="glyphicon glyphicon-play";
			}
		}
		function stop()
			{
				myVideo.currentTime = 0;
				myVideo.pause();
				mySpan.className="glyphicon glyphicon-play";
			}
			
		function sysButton()
		{
			if(myVideo.paused)
			{
				mySpan.className="glyphicon glyphicon-pause";
			}
			else
			{
				mySpan.className="glyphicon glyphicon-play";				
			}
		}
	</script>
	
</html>